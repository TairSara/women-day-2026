<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=3.0, user-scalable=yes">
    <title>אלטשולר שחם | קטלוג יום האישה 2026</title>
    <style>
        *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }
        html, body { height: 100%; overflow: hidden; -webkit-tap-highlight-color: transparent; }
        body {
            font-family: 'Segoe UI', Tahoma, Arial, sans-serif;
            background: #fff; color: #2c2c2c;
            direction: rtl; -webkit-font-smoothing: antialiased;
        }

        /* ===== NAV ===== */
        .nav-bar {
            position: fixed; top: 0; left: 0; right: 0;
            z-index: 1000; height: 62px;
            background: rgba(255,255,255,0.97);
            backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px);
            border-bottom: 1px solid rgba(0,0,0,0.06);
        }
        .nav-container {
            max-width: 1200px; margin: 0 auto;
            display: flex; align-items: center; justify-content: space-between;
            padding: 0 16px; height: 100%;
        }
        .nav-logo-img { height: 110px; width: auto; display: block; }
        .nav-page-counter { font-size: 13px; color: #999; font-weight: 500; }

        /* ===== HAMBURGER ===== */
        .hamburger {
            width: 46px; height: 46px; border: none; background: none;
            cursor: pointer; display: flex; flex-direction: column;
            align-items: center; justify-content: center;
            gap: 5px; padding: 8px; border-radius: 10px; transition: background 0.2s;
        }
        .hamburger:hover { background: rgba(26,107,74,0.06); }
        .hamburger span {
            display: block; width: 24px; height: 2.5px;
            background: #1a6b4a; border-radius: 2px;
            transition: all 0.3s ease; transform-origin: center;
        }
        .hamburger.open span:nth-child(1) { transform: rotate(45deg) translate(5px,5px); }
        .hamburger.open span:nth-child(2) { opacity: 0; }
        .hamburger.open span:nth-child(3) { transform: rotate(-45deg) translate(5px,-5px); }

        /* ===== SIDE MENU ===== */
        .menu-overlay {
            position: fixed; inset: 0; z-index: 1500;
            background: rgba(0,0,0,0.35);
            opacity: 0; pointer-events: none; transition: opacity 0.3s;
        }
        .menu-overlay.open { opacity: 1; pointer-events: all; }
        .menu-panel {
            position: fixed; top: 0; right: -320px;
            width: 300px; max-width: 85vw; height: 100%;
            z-index: 1600; background: #fff;
            box-shadow: -4px 0 30px rgba(0,0,0,0.12);
            transition: right 0.35s cubic-bezier(0.4,0,0.2,1);
            display: flex; flex-direction: column; overflow-y: auto;
        }
        .menu-panel.open { right: 0; }
        .menu-header {
            padding: 24px 24px 16px; border-bottom: 1px solid rgba(0,0,0,0.06);
            display: flex; align-items: center; gap: 12px;
        }
        .menu-header img { height: 72px; width: auto; }
        .menu-header-text h2 { font-size: 16px; font-weight: 700; color: #1a6b4a; }
        .menu-header-text p { font-size: 12px; color: #999; margin-top: 2px; }
        .menu-pages { padding: 16px; display: flex; flex-direction: column; gap: 8px; }
        .menu-page-item {
            display: flex; align-items: center; gap: 14px;
            padding: 12px 14px; border-radius: 12px;
            border: 1.5px solid transparent;
            cursor: pointer; transition: all 0.2s; background: #fafafa;
        }
        .menu-page-item:hover { background: rgba(26,107,74,0.04); border-color: rgba(26,107,74,0.15); }
        .menu-page-item.active { background: rgba(26,107,74,0.06); border-color: #1a6b4a; }
        .menu-page-thumb {
            width: 52px; height: 70px; border-radius: 6px;
            overflow: hidden; flex-shrink: 0; box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }
        .menu-page-thumb img { width: 100%; height: 100%; object-fit: cover; }
        .menu-page-info .page-name { font-size: 15px; font-weight: 600; color: #2c2c2c; }
        .menu-page-item.active .page-name { color: #1a6b4a; }
        .menu-page-info .page-number { font-size: 12px; color: #aaa; margin-top: 2px; }

        /* ===== BOOK VIEWPORT ===== */
        .book-viewport {
            position: fixed; top: 62px; left: 0; right: 0; bottom: 56px;
            overflow: hidden; background: #f0f0f0;
            perspective: 1800px;
            perspective-origin: 50% 50%;
        }

        /* ===== VIEW ===== */
        .book-view {
            position: absolute; inset: 0;
            display: flex; align-items: center; justify-content: center;
            padding: 12px;
            will-change: transform, opacity;
            backface-visibility: hidden; -webkit-backface-visibility: hidden;
            pointer-events: none; opacity: 0;
            transform-origin: right center;
            transition: transform 0.7s cubic-bezier(0.25, 0.46, 0.45, 0.94),
                        opacity 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94),
                        box-shadow 0.7s ease;
            cursor: pointer;
        }
        .book-view.no-transition { transition: none !important; }

        /* Current page */
        .book-view.pos-center {
            transform: translateX(0) rotateY(0deg) scale(1);
            opacity: 1; z-index: 2; pointer-events: all;
            box-shadow: 0 0 0 rgba(0,0,0,0);
        }
        /* Upcoming pages: waiting on the RIGHT, slightly behind */
        .book-view.pos-next {
            transform: translateX(25%) scale(0.92);
            opacity: 0; z-index: 1;
            transform-origin: left center;
        }
        /* Turned pages: flipped away to the LEFT with 3D rotation */
        .book-view.pos-prev {
            transform: translateX(-100%) rotateY(25deg) scale(0.95);
            opacity: 0; z-index: 3;
            transform-origin: right center;
            box-shadow: -15px 0 40px rgba(0,0,0,0.15);
        }

        /* ===== PAGE SHADOW EFFECT ===== */
        .book-view::after {
            content: '';
            position: absolute; inset: 0;
            pointer-events: none; z-index: 20;
            background: linear-gradient(to right, rgba(0,0,0,0.08) 0%, transparent 8%, transparent 92%, rgba(0,0,0,0.04) 100%);
            border-radius: 8px;
            opacity: 0;
            transition: opacity 0.7s ease;
        }
        .book-view.pos-center::after { opacity: 1; }

        /* ===== SINGLE PAGE ===== */
        .view-single {
            height: 100%; width: 100%;
            display: flex; align-items: center; justify-content: center;
        }
        .view-single .page-card {
            height: 100%; display: flex;
            align-items: center; justify-content: center;
            position: relative;
        }
        .view-single .page-card img {
            max-height: 100%; max-width: 100%;
            width: auto; height: auto; object-fit: contain;
            border-radius: 4px;
            box-shadow: 0 4px 30px rgba(0,0,0,0.12),
                        0 1px 4px rgba(0,0,0,0.06),
                        inset 0 0 0 1px rgba(0,0,0,0.04);
            display: block;
            user-select: none; -webkit-user-select: none; -webkit-user-drag: none;
        }

        /* ===== IMAGE LOADING ===== */
        .page-card img { opacity: 0; transition: opacity 0.5s ease; }
        .page-card img.loaded { opacity: 1; }
        .page-card::before {
            content: ''; position: absolute; inset: 0;
            background: linear-gradient(135deg, #f5f5f5 25%, #eee 50%, #f5f5f5 75%);
            background-size: 200% 200%; animation: shimmer 1.5s ease infinite;
            border-radius: 8px; z-index: 1; transition: opacity 0.4s;
        }
        .page-card.img-loaded::before { opacity: 0; pointer-events: none; }
        @keyframes shimmer {
            0% { background-position: 200% 200%; }
            100% { background-position: -200% -200%; }
        }

        /* ===== BOTTOM BAR ===== */
        .bottom-bar {
            position: fixed; bottom: 0; left: 0; right: 0;
            z-index: 900; height: 56px;
            background: rgba(255,255,255,0.97);
            backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px);
            border-top: 1px solid rgba(0,0,0,0.06);
            display: flex; align-items: center; justify-content: center;
            padding: 0 20px; padding-bottom: env(safe-area-inset-bottom, 0px);
        }
        .bottom-inner {
            display: flex; align-items: center; gap: 20px;
            max-width: 400px; width: 100%; justify-content: center;
        }
        .arrow-btn {
            width: 46px; height: 46px; border-radius: 50%;
            border: 1.5px solid rgba(0,0,0,0.1); background: #fff;
            display: flex; align-items: center; justify-content: center;
            cursor: pointer; transition: all 0.2s; flex-shrink: 0;
        }
        .arrow-btn:hover:not(:disabled) { border-color: #1a6b4a; background: rgba(26,107,74,0.04); }
        .arrow-btn:active:not(:disabled) { transform: scale(0.93); }
        .arrow-btn:disabled { opacity: 0.2; cursor: default; }
        .arrow-btn svg {
            width: 22px; height: 22px; stroke: #444; fill: none;
            stroke-width: 2; stroke-linecap: round; stroke-linejoin: round;
        }
        .page-dots { display: flex; align-items: center; gap: 8px; }
        .page-dot {
            width: 8px; height: 8px; border-radius: 50%;
            background: #ddd; transition: all 0.3s; cursor: pointer;
        }
        .page-dot.active { background: #1a6b4a; width: 24px; border-radius: 4px; }

        /* ===== RESPONSIVE ===== */
        @media (max-width: 600px) {
            .nav-bar { height: 56px; }
            .nav-logo-img { height: 100px; }
            .book-viewport { top: 56px; bottom: 50px; }
            .book-view { padding: 6px; }
            .bottom-bar { height: 50px; padding: 0 14px; }
            .arrow-btn { width: 40px; height: 40px; }
            .menu-panel { width: 280px; }
        }
    </style>
</head>
<body>

    <!-- NAV -->
    <nav class="nav-bar">
        <div class="nav-container">
            <button class="hamburger" id="hamburgerBtn" aria-label="תפריט">
                <span></span><span></span><span></span>
            </button>
            <img src="logo.webp" alt="אלטשולר שחם" class="nav-logo-img">
            <div class="nav-page-counter" id="navCounter"></div>
        </div>
    </nav>

    <!-- MENU -->
    <div class="menu-overlay" id="menuOverlay"></div>
    <div class="menu-panel" id="menuPanel">
        <div class="menu-header">
            <img src="logo.webp" alt="אלטשולר שחם">
            <div class="menu-header-text">
                <h2>יום האישה 2026</h2>
                <p>זוכות לתשואות</p>
            </div>
        </div>
        <div class="menu-pages">
            <div class="menu-page-item" data-page="0">
                <div class="menu-page-thumb"><img src="Page1.webp" alt="שער"></div>
                <div class="menu-page-info">
                    <div class="page-name">שער</div>
                    <div class="page-number">עמוד 1</div>
                </div>
            </div>
            <div class="menu-page-item" data-page="1">
                <div class="menu-page-thumb"><img src="Page2.webp" alt="שרון פרידמן"></div>
                <div class="menu-page-info">
                    <div class="page-name">שרון פרידמן</div>
                    <div class="page-number">עמוד 2</div>
                </div>
            </div>
            <div class="menu-page-item" data-page="2">
                <div class="menu-page-thumb"><img src="Page3.webp" alt="הסיפור שלי"></div>
                <div class="menu-page-info">
                    <div class="page-name">הסיפור של שרון פרידמן</div>
                    <div class="page-number">עמוד 3</div>
                </div>
            </div>
        </div>
    </div>

    <!-- === BOOK VIEWER === -->
    <div class="book-viewport" id="bookViewport">

        <!-- Page 1 (cover) -->
        <div class="book-view" id="v-0">
            <div class="view-single">
                <div class="page-card">
                    <img src="Page1.webp" alt="שער - יום האישה 2026" draggable="false">
                </div>
            </div>
        </div>

        <!-- Page 2 -->
        <div class="book-view" id="v-1">
            <div class="view-single">
                <div class="page-card">
                    <img src="Page2.webp" alt="שרון פרידמן" draggable="false">
                </div>
            </div>
        </div>

        <!-- Page 3 -->
        <div class="book-view" id="v-2">
            <div class="view-single">
                <div class="page-card">
                    <img src="Page3.webp" alt="הסיפור של שרון פרידמן" draggable="false">
                </div>
            </div>
        </div>

    </div>

    <!-- BOTTOM BAR -->
    <div class="bottom-bar">
        <div class="bottom-inner">
            <button class="arrow-btn" id="nextBtn" aria-label="עמוד הבא">
                <svg viewBox="0 0 24 24"><polyline points="9 18 15 12 9 6"></polyline></svg>
            </button>
            <div class="page-dots" id="pageDots"></div>
            <button class="arrow-btn" id="prevBtn" aria-label="עמוד קודם">
                <svg viewBox="0 0 24 24"><polyline points="15 18 9 12 15 6"></polyline></svg>
            </button>
        </div>
    </div>

    <script>
    (function() {
        'use strict';

        var totalViews = 3;
        var cur = 0;
        var busy = false;

        // DOM
        var viewEls = [
            document.getElementById('v-0'),
            document.getElementById('v-1'),
            document.getElementById('v-2')
        ];
        var viewport = document.getElementById('bookViewport');
        var prevBtn = document.getElementById('prevBtn');
        var nextBtn = document.getElementById('nextBtn');
        var counter = document.getElementById('navCounter');
        var dotsContainer = document.getElementById('pageDots');
        var mOverlay = document.getElementById('menuOverlay');
        var mPanel = document.getElementById('menuPanel');
        var hBtn = document.getElementById('hamburgerBtn');
        var mItems = document.querySelectorAll('.menu-page-item');

        // === IMAGE LOADING ===
        document.querySelectorAll('.page-card img').forEach(function(img) {
            function done() { img.classList.add('loaded'); img.closest('.page-card').classList.add('img-loaded'); }
            img.complete ? done() : img.addEventListener('load', done);
        });

        // === BUILD DOTS ===
        for (var i = 0; i < totalViews; i++) {
            var dot = document.createElement('div');
            dot.className = 'page-dot';
            dot.dataset.view = i;
            dot.addEventListener('click', (function(idx) {
                return function() { goToView(idx); };
            })(i));
            dotsContainer.appendChild(dot);
        }

        // === POSITION VIEWS ===
        function positionViews() {
            viewEls.forEach(function(el, i) {
                el.classList.remove('pos-center', 'pos-next', 'pos-prev');
                if (i === cur) el.classList.add('pos-center');
                else if (i > cur) el.classList.add('pos-next');   // upcoming: waiting on right
                else el.classList.add('pos-prev');                 // turned: gone to left
            });
        }

        // === NAVIGATE ===
        function goToView(index) {
            if (index < 0 || index >= totalViews || index === cur || busy) return;
            busy = true;
            cur = index;
            positionViews();
            updateUI();
            setTimeout(function() { busy = false; }, 750);
        }

        function flipView(dir) { goToView(cur + dir); }

        function updateUI() {
            counter.textContent = (cur + 1) + ' / ' + totalViews;
            prevBtn.disabled = (cur === 0);
            nextBtn.disabled = (cur === totalViews - 1);

            var dots = dotsContainer.querySelectorAll('.page-dot');
            dots.forEach(function(d, i) { d.classList.toggle('active', i === cur); });

            mItems.forEach(function(m) {
                var pageIdx = parseInt(m.dataset.page);
                m.classList.toggle('active', pageIdx === cur);
            });
        }

        // === CLICK ON PAGE: right half = next, left half = prev ===
        viewEls.forEach(function(el) {
            el.addEventListener('click', function(e) {
                if (didDrag) return;
                var rect = viewport.getBoundingClientRect();
                var clickX = e.clientX - rect.left;
                if (clickX > rect.width / 2) {
                    flipView(1);  // right side = next
                } else {
                    flipView(-1); // left side = prev
                }
            });
        });

        // === ARROWS ===
        nextBtn.addEventListener('click', function() { flipView(1); });
        prevBtn.addEventListener('click', function() { flipView(-1); });

        // === MENU ===
        hBtn.addEventListener('click', function() {
            mPanel.classList.contains('open') ? closeMenu() : openMenu();
        });
        mOverlay.addEventListener('click', closeMenu);

        function openMenu() { mPanel.classList.add('open'); mOverlay.classList.add('open'); hBtn.classList.add('open'); }
        function closeMenu() { mPanel.classList.remove('open'); mOverlay.classList.remove('open'); hBtn.classList.remove('open'); }

        mItems.forEach(function(item) {
            item.addEventListener('click', function() {
                var pageIdx = parseInt(item.dataset.page);
                closeMenu();
                setTimeout(function() { goToView(pageIdx); }, 300);
            });
        });

        // === TOUCH SWIPE ===
        // Direction: swipe LEFT = forward (page turns left, new page from right)
        var tx0, ty0, tdx, swiping, t0;

        viewport.addEventListener('touchstart', function(e) {
            if (busy) return;
            tx0 = e.touches[0].clientX; ty0 = e.touches[0].clientY;
            tdx = 0; swiping = false; t0 = Date.now();
            viewEls.forEach(function(v) { v.classList.add('no-transition'); });
        }, { passive: true });

        viewport.addEventListener('touchmove', function(e) {
            if (busy) return;
            var dx = e.touches[0].clientX - tx0;
            var dy = e.touches[0].clientY - ty0;
            if (!swiping) {
                if (Math.abs(dx) > Math.abs(dy) && Math.abs(dx) > 10) swiping = true;
                else if (Math.abs(dy) > 10) return;
            }
            if (!swiping) return;
            e.preventDefault();
            tdx = dx;

            var pct = (tdx / viewport.offsetWidth) * 100;
            var cv = viewEls[cur];

            // Current page follows finger with 3D rotation
            cv.style.transform = 'translateX(' + pct + '%) rotateY(' + (pct * 0.15) + 'deg) scale(' + (1 - Math.abs(pct) * 0.0005) + ')';
            cv.style.opacity = String(Math.max(0.15, 1 - Math.abs(pct) * 0.01));
            cv.style.boxShadow = Math.abs(pct) > 5 ? (pct < 0 ? '-' : '') + '12px 0 35px rgba(0,0,0,' + (Math.min(Math.abs(pct) * 0.003, 0.2)) + ')' : 'none';

            // Swipe left (forward): reveal next page from right
            if (tdx < 0 && cur < totalViews - 1) {
                var nv = viewEls[cur + 1];
                var p = Math.min(Math.abs(pct) / 100, 1);
                nv.style.transform = 'translateX(' + (25 - 25 * p) + '%) scale(' + (0.92 + 0.08 * p) + ')';
                nv.style.opacity = String(Math.min(p * 1.5, 1));
            }
            // Swipe right (backward): bring prev page back from left
            else if (tdx > 0 && cur > 0) {
                var pv = viewEls[cur - 1];
                var p2 = Math.min(Math.abs(pct) / 100, 1);
                pv.style.transform = 'translateX(' + (-100 + 100 * p2) + '%) rotateY(' + (25 - 25 * p2) + 'deg) scale(' + (0.95 + 0.05 * p2) + ')';
                pv.style.opacity = String(Math.min(p2 * 1.5, 1));
            }
        }, { passive: false });

        viewport.addEventListener('touchend', function() {
            viewEls.forEach(function(v) {
                v.classList.remove('no-transition');
                v.style.transform = ''; v.style.opacity = ''; v.style.boxShadow = '';
            });
            if (!swiping) return;
            var vel = Math.abs(tdx) / (Date.now() - t0);
            var thr = vel > 0.3 ? 30 : viewport.offsetWidth * 0.2;
            if (tdx < -thr && cur < totalViews - 1) goToView(cur + 1);       // swipe left = forward
            else if (tdx > thr && cur > 0) goToView(cur - 1);                 // swipe right = backward
            else positionViews();
        }, { passive: true });

        // === MOUSE DRAG ===
        var mDown = false, mx0, mdx, didDrag = false;

        viewport.addEventListener('mousedown', function(e) {
            if (busy) return;
            mDown = true; didDrag = false; mx0 = e.clientX; mdx = 0;
            viewEls.forEach(function(v) { v.classList.add('no-transition'); });
            viewport.style.cursor = 'grabbing';
            e.preventDefault();
        });

        window.addEventListener('mousemove', function(e) {
            if (!mDown) return;
            mdx = e.clientX - mx0;
            if (Math.abs(mdx) > 5) didDrag = true;

            var pct = (mdx / viewport.offsetWidth) * 100;
            var cv = viewEls[cur];

            cv.style.transform = 'translateX(' + pct + '%) rotateY(' + (pct * 0.15) + 'deg) scale(' + (1 - Math.abs(pct) * 0.0005) + ')';
            cv.style.opacity = String(Math.max(0.15, 1 - Math.abs(pct) * 0.01));
            cv.style.boxShadow = Math.abs(pct) > 5 ? (pct < 0 ? '-' : '') + '12px 0 35px rgba(0,0,0,' + (Math.min(Math.abs(pct) * 0.003, 0.2)) + ')' : 'none';

            if (mdx < 0 && cur < totalViews - 1) {
                var nv = viewEls[cur + 1];
                var p = Math.min(Math.abs(pct) / 100, 1);
                nv.style.transform = 'translateX(' + (25 - 25 * p) + '%) scale(' + (0.92 + 0.08 * p) + ')';
                nv.style.opacity = String(Math.min(p * 1.5, 1));
            } else if (mdx > 0 && cur > 0) {
                var pv = viewEls[cur - 1];
                var p2 = Math.min(Math.abs(pct) / 100, 1);
                pv.style.transform = 'translateX(' + (-100 + 100 * p2) + '%) rotateY(' + (25 - 25 * p2) + 'deg) scale(' + (0.95 + 0.05 * p2) + ')';
                pv.style.opacity = String(Math.min(p2 * 1.5, 1));
            }
        });

        window.addEventListener('mouseup', function() {
            if (!mDown) return;
            mDown = false; viewport.style.cursor = '';
            viewEls.forEach(function(v) {
                v.classList.remove('no-transition'); v.style.transform = ''; v.style.opacity = ''; v.style.boxShadow = '';
            });
            if (!didDrag) return;
            var thr = viewport.offsetWidth * 0.15;
            if (mdx < -thr && cur < totalViews - 1) goToView(cur + 1);
            else if (mdx > thr && cur > 0) goToView(cur - 1);
            else positionViews();
            setTimeout(function() { didDrag = false; }, 50);
        });

        // === KEYBOARD (Left=forward, Right=backward for this direction) ===
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape' && mPanel.classList.contains('open')) closeMenu();
            if (e.key === 'ArrowLeft') flipView(1);
            if (e.key === 'ArrowRight') flipView(-1);
        });

        // === INIT ===
        positionViews();
        updateUI();
    })();
    </script>

</body>
</html>
